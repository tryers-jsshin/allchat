(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{7346:(e,s,t)=>{"use strict";t.d(s,{F:()=>i});var a=t(5155),n=t(2115),l=t(2912),r=t(5016);let i=n.forwardRef((e,s)=>{let{className:t,children:n,...i}=e;return(0,a.jsxs)(l.bL,{ref:s,className:(0,r.cn)("relative overflow-hidden",t),...i,children:[(0,a.jsx)(l.LM,{className:"h-full w-full rounded-[inherit]",children:n}),(0,a.jsx)(c,{}),(0,a.jsx)(l.OK,{})]})});i.displayName=l.bL.displayName;let c=n.forwardRef((e,s)=>{let{className:t,orientation:n="vertical",...i}=e;return(0,a.jsx)(l.VM,{ref:s,orientation:n,className:(0,r.cn)("flex touch-none select-none transition-colors","vertical"===n&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===n&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...i,children:(0,a.jsx)(l.lr,{className:"relative flex-1 rounded-full bg-border"})})});c.displayName=l.VM.displayName},7812:(e,s,t)=>{"use strict";t.d(s,{E:()=>i});var a=t(5155);t(2115);var n=t(3101),l=t(5016);let r=(0,n.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function i(e){let{className:s,variant:t,...n}=e;return(0,a.jsx)("div",{className:(0,l.cn)(r({variant:t}),s),...n})}},7814:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>Z});var a=t(5155),n=t(2115),l=t(7812),r=t(7346),i=t(923),c=t(6170),o=t(6651),d=t(5229),m=t(5016);function u(e){let{channel:s,className:t="w-4 h-4"}=e;switch(s){case"kakao":return(0,a.jsx)("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",children:(0,a.jsx)("path",{d:"M12 3C6.477 3 2 6.477 2 10.5c0 2.577 1.83 4.837 4.582 6.135-.2.863-.73 3.117-.84 3.609-.137.623.23.618.482.45.195-.13 3.1-2.106 4.364-2.96.458.064.93.096 1.412.096 5.523 0 10-3.477 10-7.77S17.523 3 12 3z",fill:"#FFD700"})});case"instagram":return(0,a.jsxs)("svg",{className:t,viewBox:"0 0 24 24",fill:"none",children:[(0,a.jsx)("rect",{x:"2",y:"2",width:"20",height:"20",rx:"5",stroke:"url(#instagram-gradient)",strokeWidth:"2"}),(0,a.jsx)("circle",{cx:"12",cy:"12",r:"4",stroke:"url(#instagram-gradient)",strokeWidth:"2"}),(0,a.jsx)("circle",{cx:"17.5",cy:"6.5",r:"1.5",fill:"url(#instagram-gradient)"}),(0,a.jsx)("defs",{children:(0,a.jsxs)("linearGradient",{id:"instagram-gradient",x1:"0%",y1:"0%",x2:"100%",y2:"100%",children:[(0,a.jsx)("stop",{offset:"0%",stopColor:"#f09433"}),(0,a.jsx)("stop",{offset:"25%",stopColor:"#e6683c"}),(0,a.jsx)("stop",{offset:"50%",stopColor:"#dc2743"}),(0,a.jsx)("stop",{offset:"75%",stopColor:"#cc2366"}),(0,a.jsx)("stop",{offset:"100%",stopColor:"#bc1888"})]})})]});case"naver":return(0,a.jsx)("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",children:(0,a.jsx)("path",{d:"M3 3v18h6.5v-7.5L14.5 21H21V3h-6.5v7.5L9.5 3H3z",fill:"#03C75A"})});case"wechat":return(0,a.jsxs)("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",children:[(0,a.jsx)("path",{d:"M15.85 8.14c.39 0 .77.03 1.14.08C16.31 5.25 13.19 3 9.44 3c-4.25 0-7.7 2.88-7.7 6.43 0 2.05 1.15 3.86 3.08 5.2l-.77 2.31 2.69-1.34c.96.19 1.73.38 2.69.38.24 0 .48-.01.71-.03a5.483 5.483 0 01-.23-1.52c0-3.18 2.73-5.77 6.09-5.77zm-3.85-1.93c.58 0 .96.38.96.96 0 .58-.38.96-.96.96s-1.15-.38-1.15-.96c0-.58.58-.96 1.15-.96zM6.56 7.17c-.58 0-1.15-.38-1.15-.96 0-.58.58-.96 1.15-.96.58 0 .96.38.96.96 0 .58-.38.96-.96.96z",fill:"#7BB32E"}),(0,a.jsx)("path",{d:"M22.26 14.43c0-2.88-2.88-5.24-6.12-5.24-3.43 0-6.13 2.36-6.13 5.24 0 2.89 2.7 5.24 6.13 5.24.77 0 1.35-.19 2.12-.38l1.93.96-.58-1.73c1.54-1.15 2.69-2.69 2.69-4.09zm-8.09-.96c-.38 0-.77-.38-.77-.77s.38-.77.77-.77c.58 0 .96.38.96.77 0 .38-.38.77-.96.77zm3.85 0c-.38 0-.77-.38-.77-.77s.38-.77.77-.77c.58 0 .96.38.96.77 0 .38-.38.77-.96.77z",fill:"#7BB32E"})]});case"line":return(0,a.jsx)("svg",{className:t,viewBox:"0 0 24 24",fill:"currentColor",children:(0,a.jsx)("path",{d:"M19.365 9.863c.349 0 .63.285.63.631 0 .345-.281.63-.63.63H17.61v1.125h1.755c.349 0 .63.283.63.63 0 .344-.281.629-.63.629h-2.386c-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.63-.63h2.386c.349 0 .63.285.63.63 0 .349-.281.63-.63.63H17.61v1.125h1.755zm-3.855 3.016c0 .27-.174.51-.432.596-.064.021-.133.031-.199.031-.211 0-.391-.09-.51-.25l-2.443-3.317v2.94c0 .344-.279.629-.631.629-.346 0-.626-.285-.626-.629V8.108c0-.27.173-.51.43-.595.06-.023.136-.033.194-.033.195 0 .375.104.495.254l2.462 3.33V8.108c0-.345.282-.63.63-.63.345 0 .63.285.63.63v4.771zm-5.741 0c0 .344-.282.629-.631.629-.345 0-.627-.285-.627-.629V8.108c0-.345.282-.63.627-.63.349 0 .631.285.631.63v4.771zm-2.466.629H4.917c-.345 0-.63-.285-.63-.629V8.108c0-.345.285-.63.63-.63.349 0 .63.285.63.63v4.141h1.756c.348 0 .629.283.629.63 0 .344-.282.629-.629.629M24 10.314C24 4.943 18.615.572 12 .572S0 4.943 0 10.314c0 4.811 4.27 8.842 10.035 9.608.391.082.923.258 1.058.59.12.301.079.766.038 1.08l-.164 1.02c-.045.301-.24 1.186 1.049.645 1.291-.539 6.916-4.078 9.436-6.975C23.176 14.393 24 12.458 24 10.314",fill:"#00B900"})});default:return null}}function x(e){let{customers:s,selectedCustomerId:t,onSelectCustomer:x}=e,[h,p]=(0,n.useState)("active"),[f,g]=(0,n.useState)(""),j=(0,n.useMemo)(()=>s.reduce((e,s)=>(e[s.status]=(e[s.status]||0)+1,e),{}),[s]),v=(0,n.useMemo)(()=>{let e=s;return"active"===h?e=e.filter(e=>"processing"===e.status||"hold"===e.status||"waiting-customer"===e.status||"waiting-other"===e.status):"completed"===h&&(e=e.filter(e=>"completed"===e.status)),f&&(e=e.filter(e=>e.name.toLowerCase().includes(f.toLowerCase()))),e},[s,h,f]);return(0,a.jsxs)("div",{className:"h-full border-r bg-muted/10",children:[(0,a.jsxs)("div",{className:"p-4",children:[(0,a.jsx)("h2",{className:"text-lg font-semibold mb-3",children:"고객 메시지"}),(0,a.jsx)(i.tU,{value:h,onValueChange:e=>p(e),children:(0,a.jsxs)(i.j7,{className:"grid w-full grid-cols-3 mb-3",children:[(0,a.jsx)(i.Xi,{value:"active",className:"text-xs data-[state=active]:text-xs",children:(0,a.jsxs)("span",{className:"flex items-center gap-1",children:["진행 중",(0,a.jsx)("span",{className:"text-[10px] font-bold text-orange-500",children:(j.processing||0)+(j.hold||0)+(j["waiting-customer"]||0)+(j["waiting-other"]||0)})]})}),(0,a.jsx)(i.Xi,{value:"all",className:"text-xs data-[state=active]:text-xs",children:(0,a.jsxs)("span",{className:"flex items-center gap-1",children:["전체",(0,a.jsx)("span",{className:"text-[10px] font-normal text-muted-foreground",children:s.length})]})}),(0,a.jsx)(i.Xi,{value:"completed",className:"text-xs data-[state=active]:text-xs",children:(0,a.jsxs)("span",{className:"flex items-center gap-1",children:["완료",(0,a.jsx)("span",{className:"text-[10px] font-normal text-muted-foreground",children:j.completed||0})]})})]})}),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(o.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),(0,a.jsx)(c.p,{type:"text",placeholder:"이름 검색...",value:f,onChange:e=>g(e.target.value),className:"pl-9 pr-9 h-9 text-xs"}),f&&(0,a.jsx)("button",{onClick:()=>g(""),className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-1 hover:bg-muted rounded",children:(0,a.jsx)(d.A,{className:"h-3 w-3 text-muted-foreground"})})]})]}),(0,a.jsx)(r.F,{className:"h-[calc(100vh-8rem)]",children:(0,a.jsx)("div",{className:"p-2",children:0===v.length?(0,a.jsx)("div",{className:"text-center py-8 text-muted-foreground",children:(0,a.jsx)("p",{className:"text-sm",children:"해당 상태의 고객이 없습니다"})}):v.map(e=>(0,a.jsx)("div",{onClick:()=>x(e.id),className:(0,m.cn)("relative flex items-center p-3 rounded-lg cursor-pointer hover:bg-accent transition-colors mb-2 h-20",t===e.id&&"bg-accent"),style:{borderLeft:"processing"===e.status?"3px solid rgb(252 165 165)":"3px solid transparent",paddingLeft:"16px",paddingRight:"16px"},children:(0,a.jsxs)("div",{className:"flex-1 min-w-0 flex flex-col justify-center",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-1",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h3",{className:"font-medium text-sm",children:e.name}),(0,a.jsx)(u,{channel:e.channel,className:"w-4 h-4"})]}),(0,a.jsx)("span",{className:"text-muted-foreground",style:{fontSize:"10px"},children:(e=>{let s=new Date,t=Math.floor((s.getTime()-e.getTime())/864e5);return 0===t?new Intl.DateTimeFormat("ko-KR",{hour:"numeric",minute:"2-digit"}).format(e):1===t?"어제":e.getFullYear()===s.getFullYear()?new Intl.DateTimeFormat("ko-KR",{month:"long",day:"numeric"}).format(e):new Intl.DateTimeFormat("ko-KR",{year:"numeric",month:"numeric",day:"numeric"}).format(e)})(e.lastMessageTime)})]}),(0,a.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground flex-1 line-clamp-2",children:e.lastMessage}),void 0!==e.unreadCount&&e.unreadCount>0&&(0,a.jsx)(l.E,{variant:"destructive",className:"h-4 px-1 text-[10px] flex-shrink-0 min-w-[18px] flex items-center justify-center mt-0.5",children:e.unreadCount})]})]})},e.id))})})]})}var h=t(7003);let p=n.forwardRef((e,s)=>{let{className:t,...n}=e;return(0,a.jsx)("textarea",{className:(0,m.cn)("flex w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:s,...n})});p.displayName="Textarea";var f=t(915),g=t(1047),j=t(4033),v=t(4285),N=t(8085);function b(e){let{customer:s,messages:t,onSendMessage:l,onCompleteChat:r,onStatusChange:i,onRequestAISuggestion:o,onSaveMemo:d}=e,[x,b]=(0,n.useState)(""),[w,k]=(0,n.useState)(null),[y,C]=(0,n.useState)(""),[F,A]=(0,n.useState)(!1),[D,T]=(0,n.useState)(""),M=(0,n.useRef)(null),I=(0,n.useRef)(null);if((0,n.useEffect)(()=>{let e=e=>{let s=e.target;s.closest(".ai-suggestion-button")||s.closest(".customer-message")||(k(null),C(""))};if(w)return document.addEventListener("click",e),()=>document.removeEventListener("click",e)},[w]),(0,n.useEffect)(()=>{M.current&&(M.current.scrollTop=M.current.scrollHeight)},[t]),(0,n.useEffect)(()=>{(null==s?void 0:s.memo)?T(s.memo):T("")},[s]),!s)return(0,a.jsx)("div",{className:"flex-1 flex items-center justify-center bg-muted/5",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("h3",{className:"text-lg font-medium text-muted-foreground",children:"대화방을 선택해주세요"}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground mt-2",children:"좌측 고객 목록에서 상담할 고객을 선택하세요"})]})});let S=e=>new Intl.DateTimeFormat("ko-KR",{hour:"2-digit",minute:"2-digit"}).format(e);return(0,a.jsxs)("div",{className:"flex-1 flex flex-col",children:[(0,a.jsxs)("div",{className:"border-b p-4 bg-background",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsx)("div",{className:"flex items-center gap-3",children:(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("h3",{className:"font-medium",children:s.name}),(0,a.jsx)(u,{channel:s.channel,className:"w-4 h-4"})]})}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsxs)(h.$,{variant:"ghost",size:"sm",onClick:()=>A(!F),className:"gap-1",children:[(0,a.jsx)(g.A,{className:"h-4 w-4"}),"메모"]}),(0,a.jsxs)(f.W1,{as:"div",className:"relative",children:[(0,a.jsxs)(f.IU,{className:"inline-flex items-center justify-center gap-2 rounded-md border border-input bg-background px-3 py-1.5 text-sm font-medium hover:bg-accent hover:text-accent-foreground transition-colors min-w-[100px]",children:[(0,a.jsx)("span",{children:"completed"===s.status?"완료":"진행 중"}),(0,a.jsx)(j.A,{className:"h-4 w-4"})]}),(0,a.jsx)(f.c,{transition:!0,className:"absolute right-0 z-10 mt-2 w-32 origin-top-right rounded-md bg-background border border-border shadow-lg outline-none transition data-[closed]:scale-95 data-[closed]:opacity-0 data-[enter]:duration-100 data-[leave]:duration-75",children:(0,a.jsxs)("div",{className:"py-1",children:[(0,a.jsx)(f.Dr,{children:(0,a.jsx)("button",{onClick:()=>null==i?void 0:i("processing"),className:(0,m.cn)("block w-full px-4 py-2 text-left text-sm hover:bg-accent hover:text-accent-foreground data-[focus]:bg-accent data-[focus]:text-accent-foreground transition-colors","processing"===s.status&&"bg-accent"),children:"진행 중"})}),(0,a.jsx)(f.Dr,{children:(0,a.jsx)("button",{onClick:()=>null==i?void 0:i("completed"),className:(0,m.cn)("block w-full px-4 py-2 text-left text-sm hover:bg-accent hover:text-accent-foreground data-[focus]:bg-accent data-[focus]:text-accent-foreground transition-colors","completed"===s.status&&"bg-accent"),children:"완료"})})]})})]})]})]}),F&&(0,a.jsxs)("div",{className:"mt-3 p-3 bg-yellow-50 dark:bg-yellow-950/20 rounded-lg",children:[(0,a.jsx)(p,{value:D,onChange:e=>T(e.target.value),placeholder:"고객에 대한 메모를 입력하세요...",className:"min-h-[80px] resize-none bg-transparent border-0 p-0 focus-visible:ring-0 text-sm"}),(0,a.jsxs)("div",{className:"flex justify-end mt-2 gap-2",children:[(0,a.jsx)(h.$,{size:"sm",variant:"ghost",onClick:()=>{A(!1),T((null==s?void 0:s.memo)||"")},children:"취소"}),(0,a.jsx)(h.$,{size:"sm",onClick:()=>{s&&d&&d(s.id,D),A(!1)},children:"저장"})]})]})]}),(0,a.jsx)("div",{className:"flex-1 overflow-hidden bg-gray-50/40 dark:bg-gray-950/20",children:(0,a.jsx)("div",{className:"h-full overflow-y-auto p-4",ref:M,children:t.map((e,s)=>{let n,l,r,i=S(e.timestamp),d=t[s+1],u=d?S(d.timestamp):null,x=t[s-1],p=x?S(x.timestamp):null,f=!d||u!==i||d.isFromCustomer!==e.isFromCustomer,g=x&&p===i&&x.isFromCustomer===e.isFromCustomer,j=!x||(n=x.timestamp,l=e.timestamp,n.getFullYear()!==l.getFullYear()||n.getMonth()!==l.getMonth()||n.getDate()!==l.getDate());return(0,a.jsxs)("div",{children:[j&&(0,a.jsxs)("div",{className:"flex items-center my-4",children:[(0,a.jsx)("div",{className:"flex-1 border-t border-border"}),(0,a.jsx)("span",{className:"px-4 text-xs text-muted-foreground",children:(r=e.timestamp,new Intl.DateTimeFormat("ko-KR",{year:"numeric",month:"long",day:"numeric",weekday:"long"}).format(r))}),(0,a.jsx)("div",{className:"flex-1 border-t border-border"})]}),(0,a.jsx)("div",{className:(0,m.cn)("flex",e.isFromCustomer?"justify-start":"justify-end",g?"mt-1":"mt-4"),children:(0,a.jsxs)("div",{className:(0,m.cn)("flex gap-2 items-end max-w-[70%]",!e.isFromCustomer&&"flex-row-reverse"),children:[(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:(0,m.cn)("rounded-lg px-4 py-2 customer-message",e.isFromCustomer?"bg-muted cursor-pointer hover:bg-muted/80 transition-colors":"bg-primary text-primary-foreground"),onClick:s=>{s.stopPropagation(),e.isFromCustomer&&k(e.id===w?null:e.id)},children:(0,a.jsx)("p",{className:"text-sm whitespace-pre-wrap",children:e.content})}),e.isFromCustomer&&w===e.id&&(0,a.jsx)("div",{className:"absolute left-0 top-full mt-1 z-10 bg-background border rounded-lg shadow-lg p-2.5 ai-suggestion-button",style:{minWidth:"240px"},children:(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)(c.p,{type:"text",placeholder:"어떻게 답변할까요? (선택)",value:y,onChange:e=>C(e.target.value),className:"h-7 text-xs",onClick:e=>e.stopPropagation(),onKeyDown:s=>{"Enter"===s.key&&(s.stopPropagation(),s.preventDefault(),null==o||o({...e,tone:y.trim()?"custom":"auto",customPrompt:y.trim()}),k(null),C(""))}}),(0,a.jsxs)(h.$,{size:"sm",variant:"default",className:"h-8 text-xs gap-1.5 w-full hover:bg-violet-600",onClick:s=>{s.stopPropagation(),null==o||o({...e,tone:y.trim()?"custom":"auto",customPrompt:y.trim()}),k(null),C("")},children:[(0,a.jsx)("svg",{className:"w-3.5 h-3.5",viewBox:"0 0 16 16",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M5 4a.75.75 0 0 1 .738.616l.252 1.388A1.25 1.25 0 0 0 6.996 7.01l1.388.252a.75.75 0 0 1 0 1.476l-1.388.252A1.25 1.25 0 0 0 5.99 9.996l-.252 1.388a.75.75 0 0 1-1.476 0L4.01 9.996A1.25 1.25 0 0 0 3.004 8.99l-1.388-.252a.75.75 0 0 1 0-1.476l1.388-.252A1.25 1.25 0 0 0 4.01 6.004l.252-1.388A.75.75 0 0 1 5 4ZM12 1a.75.75 0 0 1 .721.544l.195.682c.118.415.443.74.858.858l.682.195a.75.75 0 0 1 0 1.442l-.682.195a1.25 1.25 0 0 0-.858.858l-.195.682a.75.75 0 0 1-1.442 0l-.195-.682a1.25 1.25 0 0 0-.858-.858l-.682-.195a.75.75 0 0 1 0-1.442l.682-.195a1.25 1.25 0 0 0 .858-.858l.195-.682A.75.75 0 0 1 12 1ZM10 11a.75.75 0 0 1 .728.568.968.968 0 0 0 .704.704.75.75 0 0 1 0 1.456.968.968 0 0 0-.704.704.75.75 0 0 1-1.456 0 .968.968 0 0 0-.704-.704.75.75 0 0 1 0-1.456.968.968 0 0 0 .704-.704A.75.75 0 0 1 10 11Z",clipRule:"evenodd"})}),(0,a.jsx)("span",{children:"AI 답변 추천 받기"})]})]})})]}),f&&(0,a.jsx)("span",{className:"text-xs text-muted-foreground shrink-0",children:i}),!f&&(0,a.jsx)("div",{className:"w-10"})]})})]},e.id)})})}),(0,a.jsx)("div",{className:"border-t p-4 bg-background",children:(0,a.jsxs)("div",{className:"flex items-end gap-2",children:[(0,a.jsx)(h.$,{variant:"ghost",size:"icon",className:"shrink-0",children:(0,a.jsx)(v.A,{className:"h-5 w-5"})}),(0,a.jsx)("div",{className:"flex-1",children:(0,a.jsx)(p,{ref:I,value:x,onChange:e=>{b(e.target.value),I.current&&(I.current.style.height="40px",I.current.style.height=Math.min(I.current.scrollHeight,120)+"px")},placeholder:"메시지를 입력하세요... (Enter로 줄바꿈)",className:"resize-none overflow-y-auto",style:{minHeight:"40px",maxHeight:"120px",scrollbarWidth:"thin",scrollbarColor:"rgba(156, 163, 175, 0.4) transparent"},rows:1})}),(0,a.jsx)(h.$,{onClick:()=>{x.trim()&&(l(x),b(""),I.current&&(I.current.style.height="40px",I.current.focus()))},disabled:!x.trim(),size:"icon",className:"shrink-0",children:(0,a.jsx)(N.A,{className:"h-5 w-5"})})]})})]})}var w=t(3209),k=t(5426),y=t(7937),C=t(9347),F=t(508),A=t(9715),D=t(3448);function T(e){let{onUseQuickReply:s,activeTab:t,onTabChange:l,aiSuggestions:u=[]}=e,[x,p]=(0,n.useState)(""),[f,g]=(0,n.useState)(null),[j,v]=(0,n.useState)(null),[N,b]=(0,n.useState)("situation"),[T,M]=(0,n.useState)(null),[I,S]=(0,n.useState)(!1),[z,R]=(0,n.useState)(-1),[B,Z]=(0,n.useState)(["q1","q2","q3"]),[E,L]=(0,n.useState)(["favorites"]),P=(e,t)=>{s?s(e):navigator.clipboard.writeText(e),v(t),setTimeout(()=>v(null),2e3)},$=e=>new Intl.NumberFormat("ko-KR").format(e),V=e=>{M(T===e?null:e)},W=e=>{Z(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},H=e=>{L(s=>s.includes(e)?s.filter(s=>s!==e):[...s,e])},K=D.F.procedures.filter(e=>e.name.toLowerCase().includes(x.toLowerCase()));return(0,a.jsxs)("div",{className:"w-96 h-full bg-muted/10 border-l flex flex-col",children:[(0,a.jsx)("div",{className:"p-4",children:(0,a.jsx)("h2",{className:"text-lg font-semibold",children:"상담 어시스턴트"})}),(0,a.jsxs)(i.tU,{value:t||N,onValueChange:l||b,className:"flex-1 flex flex-col overflow-hidden",children:[(0,a.jsx)("div",{className:"px-4 pt-3 pb-2",children:(0,a.jsxs)(i.j7,{className:"grid w-full grid-cols-4",children:[(0,a.jsx)(i.Xi,{value:"ai",className:"text-xs px-1 text-violet-600 data-[state=active]:text-violet-600 data-[state=active]:bg-violet-50 dark:data-[state=active]:bg-violet-950/30",children:(0,a.jsx)("svg",{className:"w-4 h-4",viewBox:"0 0 16 16",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M5 4a.75.75 0 0 1 .738.616l.252 1.388A1.25 1.25 0 0 0 6.996 7.01l1.388.252a.75.75 0 0 1 0 1.476l-1.388.252A1.25 1.25 0 0 0 5.99 9.996l-.252 1.388a.75.75 0 0 1-1.476 0L4.01 9.996A1.25 1.25 0 0 0 3.004 8.99l-1.388-.252a.75.75 0 0 1 0-1.476l1.388-.252A1.25 1.25 0 0 0 4.01 6.004l.252-1.388A.75.75 0 0 1 5 4ZM12 1a.75.75 0 0 1 .721.544l.195.682c.118.415.443.74.858.858l.682.195a.75.75 0 0 1 0 1.442l-.682.195a1.25 1.25 0 0 0-.858.858l-.195.682a.75.75 0 0 1-1.442 0l-.195-.682a1.25 1.25 0 0 0-.858-.858l-.682-.195a.75.75 0 0 1 0-1.442l.682-.195a1.25 1.25 0 0 0 .858-.858l.195-.682A.75.75 0 0 1 12 1ZM10 11a.75.75 0 0 1 .728.568.968.968 0 0 0 .704.704.75.75 0 0 1 0 1.456.968.968 0 0 0-.704.704.75.75 0 0 1-1.456 0 .968.968 0 0 0-.704-.704.75.75 0 0 1 0-1.456.968.968 0 0 0 .704-.704A.75.75 0 0 1 10 11Z",clipRule:"evenodd"})})}),(0,a.jsx)(i.Xi,{value:"situation",className:"text-xs px-1",children:"기본"}),(0,a.jsx)(i.Xi,{value:"doctors",className:"text-xs px-1",children:"시술 검색"}),(0,a.jsx)(i.Xi,{value:"reference",className:"text-xs px-1",children:"참고"})]})}),(0,a.jsxs)("div",{className:"flex-1 overflow-hidden",children:[(0,a.jsx)(i.av,{value:"ai",className:"h-full",children:(0,a.jsx)(r.F,{className:"h-full px-4 mt-4",children:(0,a.jsx)("div",{className:"space-y-3 pb-4",children:u.length>0?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)("h3",{className:"text-sm font-medium text-muted-foreground",children:"AI 추천 답변"}),u.map((e,s)=>(0,a.jsxs)(w.Zp,{className:"",children:[(0,a.jsx)(w.aR,{className:"p-3 pb-2",children:(0,a.jsx)(w.ZB,{className:"text-xs flex items-center justify-between",children:(0,a.jsxs)("span",{className:"flex items-center gap-2",children:[(0,a.jsxs)("span",{className:"text-violet-600 font-medium",children:["추천 ",s+1]}),(0,a.jsx)("span",{className:"text-muted-foreground",children:e.title})]})})}),(0,a.jsxs)(w.Wu,{className:"p-3 pt-0",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground whitespace-pre-line mb-2",children:e.content}),(0,a.jsxs)(h.$,{size:"sm",variant:j===e.id?"default":"outline",className:"w-full h-7 text-xs",onClick:()=>P(e.content,e.id),children:[(0,a.jsx)(k.A,{className:"w-3 h-3 mr-1"}),j===e.id?"복사됨!":"복사"]})]})]},e.id))]}):(0,a.jsxs)("div",{className:"text-center py-8",children:[(0,a.jsx)("svg",{className:"w-12 h-12 mx-auto mb-3 text-violet-500/30",viewBox:"0 0 16 16",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M5 4a.75.75 0 0 1 .738.616l.252 1.388A1.25 1.25 0 0 0 6.996 7.01l1.388.252a.75.75 0 0 1 0 1.476l-1.388.252A1.25 1.25 0 0 0 5.99 9.996l-.252 1.388a.75.75 0 0 1-1.476 0L4.01 9.996A1.25 1.25 0 0 0 3.004 8.99l-1.388-.252a.75.75 0 0 1 0-1.476l1.388-.252A1.25 1.25 0 0 0 4.01 6.004l.252-1.388A.75.75 0 0 1 5 4ZM12 1a.75.75 0 0 1 .721.544l.195.682c.118.415.443.74.858.858l.682.195a.75.75 0 0 1 0 1.442l-.682.195a1.25 1.25 0 0 0-.858.858l-.195.682a.75.75 0 0 1-1.442 0l-.195-.682a1.25 1.25 0 0 0-.858-.858l-.682-.195a.75.75 0 0 1 0-1.442l.682-.195a1.25 1.25 0 0 0 .858-.858l.195-.682A.75.75 0 0 1 12 1ZM10 11a.75.75 0 0 1 .728.568.968.968 0 0 0 .704.704.75.75 0 0 1 0 1.456.968.968 0 0 0-.704.704.75.75 0 0 1-1.456 0 .968.968 0 0 0-.704-.704.75.75 0 0 1 0-1.456.968.968 0 0 0 .704-.704A.75.75 0 0 1 10 11Z",clipRule:"evenodd"})}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["고객 메시지를 클릭하고",(0,a.jsx)("br",{}),"'AI 답변 추천 받기'를 눌러보세요"]})]})})})}),(0,a.jsx)(i.av,{value:"situation",className:"h-full",children:(0,a.jsx)(r.F,{className:"h-full px-4 mt-4",children:(0,a.jsxs)("div",{className:"space-y-3 pb-4",children:[B.length>0&&(0,a.jsxs)("div",{children:[(0,a.jsxs)("button",{onClick:()=>H("favorites"),className:"flex items-center gap-1 w-full text-left mb-2",children:[(0,a.jsx)(y.A,{className:(0,m.cn)("w-3 h-3 transition-transform",E.includes("favorites")&&"rotate-90")}),(0,a.jsx)("h3",{className:"text-sm font-medium",children:"즐겨찾기"})]}),E.includes("favorites")&&(0,a.jsx)("div",{className:"space-y-2",children:[...D.F.quickAnswers,...D.F.situations.flatMap(e=>e.answers)].filter(e=>B.includes(e.id)).map(e=>(0,a.jsxs)(w.Zp,{className:"cursor-pointer",onClick:()=>V(e.id),children:[(0,a.jsx)(w.aR,{className:"p-3",children:(0,a.jsxs)(w.ZB,{className:"text-xs flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:s=>{s.stopPropagation(),W(e.id)},children:(0,a.jsx)(C.A,{className:(0,m.cn)("w-3 h-3 transition-colors",B.includes(e.id)?"fill-yellow-500 text-yellow-500":"text-muted-foreground")})}),e.title]}),(0,a.jsx)(y.A,{className:(0,m.cn)("w-3 h-3 transition-transform",T===e.id&&"rotate-90")})]})}),T===e.id&&(0,a.jsxs)(w.Wu,{className:"p-3 pt-0",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground whitespace-pre-line mb-2",children:e.content}),(0,a.jsxs)(h.$,{size:"sm",variant:j===e.id?"default":"outline",className:"w-full h-7 text-xs",onClick:s=>{s.stopPropagation(),P(e.content,e.id)},children:[(0,a.jsx)(k.A,{className:"w-3 h-3 mr-1"}),j===e.id?"복사됨!":"복사"]})]})]},e.id))})]}),(0,a.jsxs)("div",{children:[(0,a.jsxs)("button",{onClick:()=>H("basic"),className:"flex items-center gap-1 w-full text-left mb-2",children:[(0,a.jsx)(y.A,{className:(0,m.cn)("w-3 h-3 transition-transform",E.includes("basic")&&"rotate-90")}),(0,a.jsx)("h3",{className:"text-sm font-medium",children:"기본 안내"})]}),E.includes("basic")&&(0,a.jsx)("div",{className:"space-y-2",children:D.F.quickAnswers.filter(e=>"basic"===e.category).map(e=>(0,a.jsxs)(w.Zp,{className:"cursor-pointer",onClick:()=>V(e.id),children:[(0,a.jsx)(w.aR,{className:"p-3",children:(0,a.jsxs)(w.ZB,{className:"text-xs flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:s=>{s.stopPropagation(),W(e.id)},children:(0,a.jsx)(C.A,{className:(0,m.cn)("w-3 h-3 transition-colors",B.includes(e.id)?"fill-yellow-500 text-yellow-500":"text-muted-foreground")})}),e.title]}),(0,a.jsx)(y.A,{className:(0,m.cn)("w-3 h-3 transition-transform",T===e.id&&"rotate-90")})]})}),T===e.id&&(0,a.jsxs)(w.Wu,{className:"p-3 pt-0",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground whitespace-pre-line mb-2",children:e.content}),(0,a.jsxs)(h.$,{size:"sm",variant:j===e.id?"default":"outline",className:"w-full h-7 text-xs",onClick:s=>{s.stopPropagation(),P(e.content,e.id)},children:[(0,a.jsx)(k.A,{className:"w-3 h-3 mr-1"}),j===e.id?"복사됨!":"복사"]})]})]},e.id))})]}),D.F.situations.map(e=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("button",{onClick:()=>H(e.id),className:"flex items-center gap-1 w-full text-left mb-2",children:[(0,a.jsx)(y.A,{className:(0,m.cn)("w-3 h-3 transition-transform",E.includes(e.id)&&"rotate-90")}),(0,a.jsx)("h3",{className:"text-sm font-medium",children:e.name})]}),E.includes(e.id)&&(0,a.jsx)("div",{className:"space-y-2",children:e.answers.map(e=>(0,a.jsxs)(w.Zp,{className:"cursor-pointer",onClick:()=>V(e.id),children:[(0,a.jsx)(w.aR,{className:"p-3",children:(0,a.jsxs)(w.ZB,{className:"text-xs flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("button",{onClick:s=>{s.stopPropagation(),W(e.id)},children:(0,a.jsx)(C.A,{className:(0,m.cn)("w-3 h-3 transition-colors",B.includes(e.id)?"fill-yellow-500 text-yellow-500":"text-muted-foreground")})}),e.title]}),(0,a.jsx)(y.A,{className:(0,m.cn)("w-3 h-3 transition-transform",T===e.id&&"rotate-90")})]})}),T===e.id&&(0,a.jsxs)(w.Wu,{className:"p-3 pt-0",children:[(0,a.jsx)("p",{className:"text-xs text-muted-foreground whitespace-pre-line mb-2",children:e.content}),(0,a.jsxs)(h.$,{size:"sm",variant:j===e.id?"default":"outline",className:"w-full h-7 text-xs",onClick:s=>{s.stopPropagation(),P(e.content,e.id)},children:[(0,a.jsx)(k.A,{className:"w-3 h-3 mr-1"}),j===e.id?"복사됨!":"복사"]})]})]},e.id))})]},e.id))]})})}),(0,a.jsxs)(i.av,{value:"doctors",className:"h-full flex flex-col",children:[(0,a.jsx)("div",{className:"px-4 mb-3",children:(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)(o.A,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-3 w-3 text-muted-foreground"}),(0,a.jsx)(c.p,{type:"text",placeholder:"시술명 검색...",value:x,onChange:e=>{p(e.target.value),S(e.target.value.length>0),R(-1),""===e.target.value&&g(null)},onKeyDown:e=>{if("ArrowDown"===e.key)e.preventDefault(),R(e=>e<K.length-1?e+1:e);else if("ArrowUp"===e.key)e.preventDefault(),R(e=>e>0?e-1:-1);else if("Enter"===e.key&&z>=0){e.preventDefault();let s=K[z];s&&(g(s.name),p(s.name),S(!1),R(-1))}else"Escape"===e.key&&(S(!1),R(-1))},onFocus:()=>x&&S(!0),onBlur:()=>setTimeout(()=>S(!1),200),className:(0,m.cn)("pl-8 h-8 text-xs",x&&"pr-8")}),x&&(0,a.jsx)("button",{onClick:()=>{p(""),g(null),S(!1)},className:"absolute right-2 top-1/2 transform -translate-y-1/2 p-0.5 hover:bg-accent rounded",children:(0,a.jsx)(d.A,{className:"h-3 w-3 text-muted-foreground"})}),I&&K.length>0&&(0,a.jsx)("div",{className:"absolute top-full left-0 right-0 mt-1 bg-background border rounded-md shadow-lg z-10 max-h-48 overflow-auto",children:K.map((e,s)=>(0,a.jsx)("button",{className:(0,m.cn)("w-full text-left px-3 py-2 hover:bg-accent text-xs transition-colors",z===s&&"bg-accent"),onMouseDown:()=>{g(e.name),p(e.name),S(!1),R(-1)},children:(0,a.jsx)("div",{className:"font-medium",children:e.name})},e.id))})]})}),(0,a.jsx)(r.F,{className:"flex-1 px-4",children:(0,a.jsxs)("div",{className:"pb-4",children:[f&&(0,a.jsxs)("div",{className:"space-y-4",children:[(()=>{let e=D.F.procedures.find(e=>e.name===f);return e?(0,a.jsxs)(w.Zp,{className:"bg-accent/50",children:[(0,a.jsxs)(w.aR,{className:"p-3 pb-2",children:[(0,a.jsx)(w.ZB,{className:"text-sm",children:e.name}),(0,a.jsx)("p",{className:"text-[11px] text-muted-foreground mt-1",children:e.description})]}),(0,a.jsxs)(w.Wu,{className:"p-3 pt-1 space-y-2",children:[(0,a.jsxs)("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted-foreground text-[10px]",children:"가격"}),(0,a.jsxs)("p",{className:"font-medium text-[11px]",children:[$(e.priceRange.min/1e4),"~",$(e.priceRange.max/1e4),"만원"]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-muted-foreground text-[10px]",children:"소요시간"}),(0,a.jsx)("p",{className:"font-medium text-[11px]",children:e.duration})]})]}),(0,a.jsxs)(h.$,{size:"sm",variant:j===e.id?"default":"outline",className:"w-full h-7 text-xs",onClick:()=>{P("".concat(e.name,"\n\n가격: ").concat($(e.priceRange.min),"원 ~ ").concat($(e.priceRange.max),"원\n소요시간: ").concat(e.duration,"\n\n주의사항:\n").concat(e.precautions.join("\n")),e.id)},children:[(0,a.jsx)(k.A,{className:"w-3 h-3 mr-1"}),j===e.id?"복사됨!":"복사"]})]})]}):null})(),(0,a.jsxs)("div",{className:"space-y-2",children:[(0,a.jsx)("h4",{className:"text-xs font-medium text-muted-foreground",children:"시술 가능 의사"}),D.F.doctors.map(e=>{let s=e.procedures.find(e=>e.procedureName===f);return s?(0,a.jsx)(w.Zp,{className:(0,m.cn)("border","expert"===s.proficiency&&"border-blue-200 bg-blue-50/50 dark:border-blue-900 dark:bg-blue-950/20","available"===s.proficiency&&"border-green-200 bg-green-50/50 dark:border-green-900 dark:bg-green-950/20","unavailable"===s.proficiency&&"border-red-200 bg-red-50/50 dark:border-red-900 dark:bg-red-950/20"),children:(0,a.jsx)(w.Wu,{className:"p-3",children:(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)("div",{className:"w-8 h-8 bg-background rounded-full flex items-center justify-center border",children:(0,a.jsx)(F.A,{className:"w-4 h-4"})}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm font-medium",children:e.name}),(0,a.jsx)("p",{className:"text-[10px] text-muted-foreground",children:e.title})]})]}),(0,a.jsx)("div",{className:"text-right",children:(0,a.jsxs)("p",{className:(0,m.cn)("text-xs font-medium","expert"===s.proficiency&&"text-blue-600","available"===s.proficiency&&"text-green-600","unavailable"===s.proficiency&&"text-red-500"),children:["expert"===s.proficiency&&"숙련","available"===s.proficiency&&"가능","unavailable"===s.proficiency&&"불가"]})})]})})},e.id):null}).filter(Boolean)]})]}),!f&&(0,a.jsxs)("div",{className:"mt-8 text-center",children:[(0,a.jsx)(o.A,{className:"w-12 h-12 mx-auto text-muted-foreground/30 mb-3"}),(0,a.jsxs)("p",{className:"text-xs text-muted-foreground",children:["시술명을 검색하면",(0,a.jsx)("br",{}),"상세 정보와 가능한 의사를",(0,a.jsx)("br",{}),"확인할 수 있습니다"]})]})]})})]}),(0,a.jsx)(i.av,{value:"reference",className:"h-full",children:(0,a.jsx)(r.F,{className:"h-full px-4 mt-4",children:(0,a.jsxs)("div",{className:"space-y-2 pb-4",children:[(0,a.jsx)("button",{className:"w-full text-left hover:bg-accent rounded-lg transition-colors p-3 border",children:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(A.A,{className:"w-3 h-3 text-muted-foreground"}),(0,a.jsx)("p",{className:"text-xs font-medium",children:"8월 이벤트 리스트"})]}),(0,a.jsx)(y.A,{className:"w-3 h-3 text-muted-foreground"})]})}),(0,a.jsx)("button",{className:"w-full text-left hover:bg-accent rounded-lg transition-colors p-3 border",children:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(A.A,{className:"w-3 h-3 text-muted-foreground"}),(0,a.jsx)("p",{className:"text-xs font-medium",children:"가격 정책 가이드라인"})]}),(0,a.jsx)(y.A,{className:"w-3 h-3 text-muted-foreground"})]})}),(0,a.jsx)("button",{className:"w-full text-left hover:bg-accent rounded-lg transition-colors p-3 border",children:(0,a.jsxs)("div",{className:"flex items-center justify-between gap-2",children:[(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(A.A,{className:"w-3 h-3 text-muted-foreground"}),(0,a.jsx)("p",{className:"text-xs font-medium",children:"고객 불만 처리 가이드라인"})]}),(0,a.jsx)(y.A,{className:"w-3 h-3 text-muted-foreground"})]})})]})})})]})]})]})}let M=[{id:"1",name:"김민수",channel:"kakao",lastMessage:"혹시 단체 예약 할인도 있나요? 그리고 주차장도 이용 가능한지 알고 싶습니다.",lastMessageTime:new Date("2024-01-20T10:30:00"),status:"processing",unreadCount:2},{id:"2",name:"이영희",channel:"instagram",lastMessage:"교환 및 환불은 상품 수령 후 7일 이내 가능하시며, 단순 변심의 경우 왕복 배송비는 고객님 부담입니다. 상품 하자의 경우 무료로 교환/환불 도와드리고 있습니다.",lastMessageTime:new Date("2024-01-20T10:27:00"),status:"waiting-customer"},{id:"3",name:"박철수",channel:"naver",lastMessage:"감사합니다!",lastMessageTime:new Date("2024-01-20T10:22:00"),status:"completed"},{id:"4",name:"최지은",channel:"wechat",lastMessage:"가격 문의드려요",lastMessageTime:new Date("2024-01-20T10:15:00"),status:"processing",unreadCount:1},{id:"5",name:"정현우",channel:"line",lastMessage:"네, 교환 정책 안내드리겠습니다.",lastMessageTime:new Date("2024-01-20T10:11:00"),status:"waiting-other"},{id:"6",name:"강서연",channel:"kakao",lastMessage:"네, 알겠습니다. 감사합니다!",lastMessageTime:new Date("2024-01-23T15:45:00"),status:"completed"}],I={1:[{id:"m1",customerId:"1",content:"안녕하세요, 예약 문의드립니다. 이번 주말에 가족 4명이 함께 방문하려고 하는데 토요일 오후 2시경 예약 가능한지 궁금합니다.",timestamp:new Date("2024-01-20T10:29:00"),isFromCustomer:!0,channel:"kakao"},{id:"m2",customerId:"1",content:"혹시 단체 예약 할인도 있나요? 그리고 주차장도 이용 가능한지 알고 싶습니다.",timestamp:new Date("2024-01-20T10:30:00"),isFromCustomer:!0,channel:"kakao"}],2:[{id:"m3",customerId:"2",content:"인스타그램에서 본 신상품이 너무 예쁜데 현재 재고가 있나요? 사이즈는 S, M 중에 고민중이에요.",timestamp:new Date("2024-01-20T10:24:00"),isFromCustomer:!0,channel:"instagram"},{id:"m4",customerId:"2",content:"실물 색상이 사진과 똑같은지도 궁금하고, 혹시 교환이나 환불 정책도 알려주실 수 있나요?",timestamp:new Date("2024-01-20T10:25:00"),isFromCustomer:!0,channel:"instagram"},{id:"m5",customerId:"2",content:"네, 재고 확인해드리겠습니다. S, M 사이즈 모두 재고가 있습니다. 색상은 실제로 보시면 사진보다 약간 더 밝은 편이에요.",timestamp:new Date("2024-01-20T10:26:00"),isFromCustomer:!1,channel:"instagram"},{id:"m6",customerId:"2",content:"교환 및 환불은 상품 수령 후 7일 이내 가능하시며, 단순 변심의 경우 왕복 배송비는 고객님 부담입니다. 상품 하자의 경우 무료로 교환/환불 도와드리고 있습니다.",timestamp:new Date("2024-01-20T10:27:00"),isFromCustomer:!1,channel:"instagram"}],3:[{id:"m5",customerId:"3",content:"배송 언제 되나요?",timestamp:new Date("2024-01-20T10:20:00"),isFromCustomer:!0,channel:"naver"},{id:"m6",customerId:"3",content:"오늘 출고되어 내일 도착 예정입니다.",timestamp:new Date("2024-01-20T10:21:00"),isFromCustomer:!1,channel:"naver"},{id:"m7",customerId:"3",content:"감사합니다!",timestamp:new Date("2024-01-20T10:22:00"),isFromCustomer:!0,channel:"naver"}],4:[{id:"m8",customerId:"4",content:"가격 문의드려요",timestamp:new Date("2024-01-20T10:15:00"),isFromCustomer:!0,channel:"wechat"}],5:[{id:"m9",customerId:"5",content:"교환 가능한가요?",timestamp:new Date("2024-01-20T10:10:00"),isFromCustomer:!0,channel:"line"},{id:"m10",customerId:"5",content:"네, 교환 정책 안내드리겠습니다.",timestamp:new Date("2024-01-20T10:11:00"),isFromCustomer:!1,channel:"line"}],6:[{id:"m11",customerId:"6",content:"안녕하세요, 홈페이지에서 본 상품 문의드립니다.",timestamp:new Date("2024-01-18T14:20:00"),isFromCustomer:!0,channel:"kakao"},{id:"m12",customerId:"6",content:"A-1234 모델이 현재 재고가 있나요?",timestamp:new Date("2024-01-18T14:21:00"),isFromCustomer:!0,channel:"kakao"},{id:"m13",customerId:"6",content:"안녕하세요! 문의 감사합니다. A-1234 모델 재고 확인해드리겠습니다.",timestamp:new Date("2024-01-18T14:25:00"),isFromCustomer:!1,channel:"kakao"},{id:"m14",customerId:"6",content:"현재 블랙, 화이트 색상 모두 재고 보유중입니다. 사이즈는 어떤 걸 찾으시나요?",timestamp:new Date("2024-01-18T14:26:00"),isFromCustomer:!1,channel:"kakao"},{id:"m15",customerId:"6",content:"L 사이즈 블랙으로 구매하고 싶습니다",timestamp:new Date("2024-01-18T14:30:00"),isFromCustomer:!0,channel:"kakao"},{id:"m16",customerId:"6",content:"네, L 사이즈 블랙 재고 있습니다. 구매 도와드릴까요?",timestamp:new Date("2024-01-18T14:32:00"),isFromCustomer:!1,channel:"kakao"},{id:"m17",customerId:"6",content:"안녕하세요, 그때 주문한 상품 배송 언제쯤 될까요?",timestamp:new Date("2024-01-20T09:15:00"),isFromCustomer:!0,channel:"kakao"},{id:"m18",customerId:"6",content:"주문번호 확인 부탁드립니다.",timestamp:new Date("2024-01-20T09:20:00"),isFromCustomer:!1,channel:"kakao"},{id:"m19",customerId:"6",content:"ORD-20240118-1234 입니다",timestamp:new Date("2024-01-20T09:22:00"),isFromCustomer:!0,channel:"kakao"},{id:"m20",customerId:"6",content:"확인했습니다. 현재 배송 준비중이며, 오늘 오후에 출고 예정입니다.",timestamp:new Date("2024-01-20T09:25:00"),isFromCustomer:!1,channel:"kakao"},{id:"m21",customerId:"6",content:"송장번호는 출고 완료되면 문자로 발송드리겠습니다.",timestamp:new Date("2024-01-20T09:25:30"),isFromCustomer:!1,channel:"kakao"},{id:"m22",customerId:"6",content:"송장번호 받았습니다. 언제쯤 도착할까요?",timestamp:new Date("2024-01-21T11:10:00"),isFromCustomer:!0,channel:"kakao"},{id:"m23",customerId:"6",content:"보통 출고 후 1-2일 내 도착합니다. 내일 받으실 수 있을 것 같습니다.",timestamp:new Date("2024-01-21T11:15:00"),isFromCustomer:!1,channel:"kakao"},{id:"m24",customerId:"6",content:"상품 잘 받았습니다!",timestamp:new Date("2024-01-23T15:30:00"),isFromCustomer:!0,channel:"kakao"},{id:"m25",customerId:"6",content:"품질도 좋고 배송도 빨라서 만족합니다",timestamp:new Date("2024-01-23T15:31:00"),isFromCustomer:!0,channel:"kakao"},{id:"m26",customerId:"6",content:"상품 만족하신다니 다행입니다! 이용해주셔서 감사합니다.",timestamp:new Date("2024-01-23T15:40:00"),isFromCustomer:!1,channel:"kakao"},{id:"m27",customerId:"6",content:"혹시 불편하신 점이나 추가 문의사항 있으시면 언제든 연락주세요.",timestamp:new Date("2024-01-23T15:41:00"),isFromCustomer:!1,channel:"kakao"},{id:"m28",customerId:"6",content:"네, 알겠습니다. 감사합니다!",timestamp:new Date("2024-01-23T15:45:00"),isFromCustomer:!0,channel:"kakao"}]};var S=t(5998),z=t(9427),R=t(7494),B=t(5379);function Z(){let[e,s]=(0,n.useState)(M),[t,l]=(0,n.useState)(null),[r,i]=(0,n.useState)(I),[c,o]=(0,n.useState)(!1),[d,m]=(0,n.useState)("situation"),[u,p]=(0,n.useState)([]),{theme:f,setTheme:g}=(0,B.D)();(0,n.useEffect)(()=>{o(!0)},[]);let j=e.find(e=>e.id===t)||null,v=t&&r[t]||[];return c?(0,a.jsxs)("div",{className:"h-screen flex flex-col",children:[(0,a.jsxs)("header",{className:"h-14 border-b flex items-center justify-between px-4 bg-background",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)("h1",{className:"text-xl font-bold",children:"AllChat"}),(0,a.jsx)("span",{className:"text-sm text-muted-foreground",children:"통합 메신저 상담 관리 시스템"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-2",children:[(0,a.jsx)(h.$,{variant:"ghost",size:"icon",children:(0,a.jsx)(S.A,{className:"h-5 w-5"})}),(0,a.jsx)(h.$,{variant:"ghost",size:"icon",onClick:()=>g("dark"===f?"light":"dark"),children:"dark"===f?(0,a.jsx)(z.A,{className:"h-5 w-5"}):(0,a.jsx)(R.A,{className:"h-5 w-5"})})]})]}),(0,a.jsxs)("div",{className:"flex-1 flex overflow-hidden",children:[(0,a.jsx)("div",{className:"w-80",children:(0,a.jsx)(x,{customers:e,selectedCustomerId:t,onSelectCustomer:e=>{l(e),s(s=>s.map(s=>s.id===e?{...s,unreadCount:0}:s))}})}),(0,a.jsx)(b,{customer:j,messages:v,onSendMessage:e=>{if(!t)return;let a={id:"m".concat(Date.now()),customerId:t,content:e,timestamp:new Date,isFromCustomer:!1,channel:(null==j?void 0:j.channel)||"kakao"};i(e=>({...e,[t]:[...e[t]||[],a]})),s(s=>s.map(s=>s.id===t?{...s,status:"waiting-customer",lastMessage:e,lastMessageTime:new Date}:s))},onCompleteChat:()=>{t&&s(e=>e.map(e=>e.id===t?{...e,status:"completed"}:e))},onStatusChange:e=>{t&&s(s=>s.map(s=>s.id===t?{...s,status:e}:s))},onRequestAISuggestion:e=>{p([{id:"ai-1",title:"친절한 안내",content:"안녕하세요! 문의주신 내용 확인했습니다. \uD83D\uDE0A\n\n".concat(e.content.includes("예약")?"예약은 전화(02-1234-5678) 또는 카카오톡 채널로 가능합니다.":"","\n").concat(e.content.includes("가격")?"정확한 비용은 상담을 통해 안내드리겠습니다.":"","\n").concat(e.content.includes("시간")?"운영시간은 평일 10:00-19:00, 토요일 10:00-17:00 입니다.":"","\n\n추가 문의사항이 있으신가요?")},{id:"ai-2",title:"전문적인 안내",content:"고객님 문의주신 내용 확인하였습니다.\n\n".concat(e.content.includes("예약")?"예약 시스템:\n- 온라인 예약: 24시간 가능\n- 전화 예약: 운영시간 내\n- 당일 예약은 어려울 수 있습니다.":"","\n").concat(e.content.includes("가격")?"시술 비용은 개인별 상태에 따라 달라질 수 있어 상담 후 정확한 견적을 제공해드립니다.":"","\n").concat(e.content.includes("시간")?"저희 병원 운영시간은 다음과 같습니다:\n평일: 10:00-19:00\n토요일: 10:00-17:00\n일요일/공휴일: 휴무":"")},{id:"ai-3",title:"간결한 안내",content:"네, 확인했습니다.\n\n".concat(e.content.includes("예약")?"• 예약: 02-1234-5678":"","\n").concat(e.content.includes("가격")?"• 비용: 상담 후 안내":"","\n").concat(e.content.includes("시간")?"• 운영: 평일 10-19시, 토 10-17시":"","\n\n도와드릴 다른 사항이 있을까요?")}]),m("ai")},onSaveMemo:(e,t)=>{s(s=>s.map(s=>s.id===e?{...s,memo:t}:s))}}),(0,a.jsx)(T,{onUseQuickReply:e=>{navigator.clipboard.writeText(e)},activeTab:d,onTabChange:m,aiSuggestions:u})]})]}):null}},8591:(e,s,t)=>{Promise.resolve().then(t.bind(t,7814))}},e=>{e.O(0,[545,444,741,161,596,441,255,358],()=>e(e.s=8591)),_N_E=e.O()}]);